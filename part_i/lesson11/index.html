<!doctype html> <html lang=en > <meta charset=UTF-8 > <meta name=viewport  content="width=device-width, initial-scale=1"> <link rel=stylesheet  href="/embedded_ccpp/libs/highlight/github.min.css"> <link rel=stylesheet  href="/embedded_ccpp/css/franklin.css"> <link rel=stylesheet  href="/embedded_ccpp/css/poole_hyde.css"> <link rel=stylesheet  href="/embedded_ccpp/css/custom.css"> <style> html {font-size: 17px;} .franklin-content {position: relative; padding-left: 8%; padding-right: 5%; line-height: 1.35em;} @media (min-width: 940px) { .franklin-content {width: 100%; margin-left: auto; margin-right: auto;} } @media (max-width: 968px) { .franklin-content {padding-left: 6%; padding-right: 6%;} } </style> <link rel=icon  href="/embedded_ccpp/assets/c.svg"> <title>I Fundamentals - Structs</title> <div class=sidebar > <div class="container sidebar-sticky"> <div class=sidebar-about > <br> <img src="/embedded_ccpp/assets/KuwaitUniversityLogoTextLight.svg" style="width: 200px; height: auto; display: inline"> <h1 style="font-size:2em; opacity: 0.75;"><a href="/embedded_ccpp/">C/C++</a></h1> <p class=lead >Introduction to Embedded C/C++</p> </div> <script> function hidePart(part_div) { var x = document.getElementById(part_div); if (x.style.display === "none") { x.style.display = "block"; } else { x.style.display = "none"; } } </script> <nav class=sidebar-nav > <a class="sidebar-nav-item " href="/embedded_ccpp/">Home</a> <a class="sidebar-nav-item " href="https://alsaibie.github.io/me319">ME319 Mechatronics Course</a> <br> <small style="text-transform: uppercase; font-size: 0.75em">Lessons</small> <div class=part  onclick="hidePart('part1_div')">Fundamentals</div> <div id=part1_div  style="display:none;"> <a class="sidebar-nav-item " href="/embedded_ccpp/part_i/introduction/"><b>L0</b> <em>Introduction</em></a> <a class="sidebar-nav-item " href="/embedded_ccpp/part_i/lesson1/"><b>L1</b> <em>C and C++</em></a> <a class="sidebar-nav-item " href="/embedded_ccpp/part_i/lesson2/"><b>L2</b> <em>File and Program Structure</em></a> <a class="sidebar-nav-item " href="/embedded_ccpp/part_i/lesson3/"><b>L3</b> <em>Data Types</em></a> <a class="sidebar-nav-item " href="/embedded_ccpp/part_i/lesson4/"><b>L4</b> <em>Variables</em></a> <a class="sidebar-nav-item " href="/embedded_ccpp/part_i/lesson5/"><b>L5</b> <em>Arrays</em></a> <a class="sidebar-nav-item " href="/embedded_ccpp/part_i/lesson6/"><b>L6</b> <em>Type Qualifiers and Storage Specifiers</em></a> <a class="sidebar-nav-item " href="/embedded_ccpp/part_i/lesson7/"><b>L7</b> <em>Operations</em></a> <a class="sidebar-nav-item " href="/embedded_ccpp/part_i/lesson8/"><b>L8</b> <em>Control Structures</em></a> <a class="sidebar-nav-item " href="/embedded_ccpp/part_i/lesson9/"><b>L9</b> <em>Functions</em></a> <a class="sidebar-nav-item " href="/embedded_ccpp/part_i/lesson10/"><b>L10</b> <em>Pointers and References</em></a> <a class="sidebar-nav-item active" href="/embedded_ccpp/part_i/lesson11/"><b>L11</b> <em>Structs</em></a> <a class="sidebar-nav-item " href="/embedded_ccpp/part_i/lesson12/"><b>L12</b> <em>Classes</em></a> <a class="sidebar-nav-item " href="/embedded_ccpp/part_i/lesson13/"><b>L13</b> <em>Strings</em></a> <a class="sidebar-nav-item " href="/embedded_ccpp/part_i/lesson14/"><b>L14</b> <em>Preprocessor Directives</em></a> <a class="sidebar-nav-item " href="/embedded_ccpp/part_i/lesson15/"><b>L15</b> <em>Standard Library</em></a> <a class="sidebar-nav-item " href="/embedded_ccpp/part_i/lesson16/"><b>L16</b> <em>C/C++ Process Flow</em></a> <a class="sidebar-nav-item " href="/embedded_ccpp/part_i/lesson17/"><b>L17</b> <em>Debugging</em></a> </div> <!-- <div class=part  onclick="hidePart('part2_div')">Embedded Applications</div> <div id=part2_div  style="display:none;"> <a class="sidebar-nav-item {{ispage /part_ii/lesson1/}}active{{end}}" href="/embedded_ccpp/part_ii/lesson1/"><b>L1</b> <em>Event-Drive Programming</em></a> <a class="sidebar-nav-item {{ispage /part_ii/lesson2/}}active{{end}}" href="/embedded_ccpp/part_ii/lesson2/"><b>L2</b> <em>Threads</em></a> <a class="sidebar-nav-item {{ispage /part_ii/lesson3/}}active{{end}}" href="/embedded_ccpp/part_ii/lesson3/"><b>L3</b> <em>Interrupts</em></a> <a class="sidebar-nav-item {{ispage /part_ii/lesson3/}}active{{end}}" href="/embedded_ccpp/part_ii/lesson3/"><b>L4</b> <em>Scheduling</em></a> <a class="sidebar-nav-item {{ispage /part_ii/lesson3/}}active{{end}}" href="/embedded_ccpp/part_ii/lesson3/"><b>L5</b> <em>Real-Time Control</em></a> <a class="sidebar-nav-item {{ispage /part_ii/lesson3/}}active{{end}}" href="/embedded_ccpp/part_ii/lesson3/"><b>L6</b> <em>Filters and Digital Controllers</em></a> <a class="sidebar-nav-item {{ispage /part_ii/lesson3/}}active{{end}}" href="/embedded_ccpp/part_ii/lesson3/"><b>L7</b> <em>Object-Oriented Device Libraries</em></a> <a class="sidebar-nav-item {{ispage /part_ii/lesson3/}}active{{end}}" href="/embedded_ccpp/part_ii/lesson3/"><b>L8</b> <em>State-Machine</em></a> </div> <div class=part  onclick="hidePart('part3_div')">Code Optimization</div> <div id=part3_div  style="display:none;"> <a class="sidebar-nav-item {{ispage /part_iii/lesson1/}}active{{end}}" href="/embedded_ccpp/part_iii/lesson1/"><b>L1</b> <em>Variable Sizes</em></a> <a class="sidebar-nav-item {{ispage /part_iii/lesson2/}}active{{end}}" href="/embedded_ccpp/part_iii/lesson2/"><b>L2</b> <em>Probabilistic Priority</em></a> <a class="sidebar-nav-item {{ispage /part_iii/lesson3/}}active{{end}}" href="/embedded_ccpp/part_iii/lesson3/"><b>L3</b> <em>Jumps and Branches</em></a> <a class="sidebar-nav-item {{ispage /part_iii/lesson4/}}active{{end}}" href="/embedded_ccpp/part_iii/lesson4/"><b>L4</b> <em>Loop Jamming</em></a> <a class="sidebar-nav-item {{ispage /part_iii/lesson4/}}active{{end}}" href="/embedded_ccpp/part_iii/lesson4/"><b>L5</b> <em>Integer vs. Floating Point Math</em></a> <a class="sidebar-nav-item {{ispage /part_iii/lesson4/}}active{{end}}" href="/embedded_ccpp/part_iii/lesson4/"><b>L6</b> <em>Pass by Reference</em></a> <a class="sidebar-nav-item {{ispage /part_iii/lesson4/}}active{{end}}" href="/embedded_ccpp/part_iii/lesson4/"><b>L7</b> <em>Reduce Expensive Math</em></a> </div> --> <!-- <div class=part  onclick="hidePart('part4_div')">Arduino API</div> <div id=part4_div  style="display:none;"> <a class="sidebar-nav-item {{ispage /part_iv/lesson1/}}active{{end}}" href="/embedded_ccpp/part_iv/lesson1/"><b>L1</b> <em>Overview</em></a> <a class="sidebar-nav-item {{ispage /part_iv/lesson2/}}active{{end}}" href="/embedded_ccpp/part_iv/lesson2/"><b>L2</b> <em>Program Structure</em></a> <a class="sidebar-nav-item {{ispage /part_iv/lesson3/}}active{{end}}" href="/embedded_ccpp/part_iv/lesson3/"><b>L3</b> <em>Blinky Example</em></a> <a class="sidebar-nav-item {{ispage /part_iv/lesson4/}}active{{end}}" href="/embedded_ccpp/part_iv/lesson4/"><b>L4</b> <em>Input Output Example</em></a> <a class="sidebar-nav-item {{ispage /part_iv/lesson5/}}active{{end}}" href="/embedded_ccpp/part_iv/lesson5/"><b>L5</b> <em>Arduino Library</em></a> <a class="sidebar-nav-item {{ispage /part_iv/lesson6/}}active{{end}}" href="/embedded_ccpp/part_iv/lesson6/"><b>L6</b> <em>Custom Library</em></a> </div> --> <!-- <small style="text-transform: uppercase; font-size: 0.75em">Tutorials</small> <div class=part  onclick="hidePart('vscode_setup_div')">VSCode Setup</div> <div id=vscode_setup_div  style="display:none;"> <a class="sidebar-nav-item {{ispage /vscode_setup/host/}}active{{end}}" href="/embedded_ccpp/vscode_setup/host/"> <em>Compile for Host</em></a> <a class="sidebar-nav-item {{ispage /vscode_setup/platformio/}}active{{end}}" href="/embedded_ccpp/vscode_setup/platformio/"> <em>Platform-IO</em></a> </div> --> </nav> <p>&copy; Ali AlSaibie, PhD.</p> </div> </div> <div class="content container"> <div class=franklin-content ><h1 id=structs ><a href="#structs" class=header-anchor >Structs</a></h1> <center><iframe title=vimeo-player  src="https://player.vimeo.com/video/387520821" width=640  height=370  frameborder=0  allowfullscreen></iframe></center> <br> <h2 id=struct_structure ><a href="#struct_structure" class=header-anchor >Struct Structure</a></h2> <p>Supported in C and C&#43;&#43;, structs provide a way to group variables of mixed data types into one element. That element is a struct &#40;meaning structure&#41;. </p> <p>There is an important distinction here as well. When you define a struct, you are defining the <strong>shape</strong> of the struct. You then use this struct &#40;shape&#41; to create a struct <strong>instance</strong>.</p> <pre><code class="cpp hljs"><span class=hljs-class ><span class=hljs-keyword >struct</span> <span class=hljs-title >test_scores_t</span>{</span>
    <span class=hljs-keyword >int</span> midterm_1;
    <span class=hljs-keyword >int</span> midterm_2;
    <span class=hljs-keyword >int</span> final_exam;
};

<span class=hljs-class ><span class=hljs-keyword >struct</span> <span class=hljs-title >person_t</span>{</span>
    <span class=hljs-comment >/* a struct can accept a mixture of unordered types */</span>
    <span class=hljs-keyword >char</span> name[<span class=hljs-number >10</span>];
    <span class=hljs-keyword >int</span> class_year;
    <span class=hljs-keyword >char</span> gender;
    <span class=hljs-keyword >test_scores_t</span> test_scores; <span class=hljs-comment >/* a struct can be nested within a struct */</span>
};

<span class=hljs-function ><span class=hljs-keyword >int</span> <span class=hljs-title >main</span><span class=hljs-params >(<span class=hljs-keyword >void</span>)</span></span>{
    <span class=hljs-keyword >person_t</span> Ahmed;
    <span class=hljs-keyword >return</span> <span class=hljs-number >0</span>;
}</code></pre> <p>You can define multiple variables within a struct, each with a different data type and name. When accessing the struct, the struct elements can be accessed by name. </p> <p>By default, when creating a struct, you are creating the shape of the struct. Creating an instance of the struct is an additional step. The struct resembles a composite <strong>data type</strong> in a way.</p> <p>Here, we declare a struct type &#40;its shape&#41; and include three variables. Now we have <code>test_scores_t</code> that defines this new &#40;data type&#41; that has three int elements.</p> <pre><code class="cpp hljs"><span class=hljs-class ><span class=hljs-keyword >struct</span> <span class=hljs-title >test_scores_t</span>{</span>
    <span class=hljs-keyword >int</span> midterm_1;
    <span class=hljs-keyword >int</span> midterm_2;
    <span class=hljs-keyword >int</span> final_exam;
};</code></pre> <p>Here we declare a different struct, and include an array , variables and a struct. Yes, structs can embed other structs. </p> <pre><code class="cpp hljs"><span class=hljs-class ><span class=hljs-keyword >struct</span> <span class=hljs-title >person_t</span>{</span>
    <span class=hljs-comment >/* a struct can accept a mixture of unordered types */</span>
    <span class=hljs-keyword >char</span> name[<span class=hljs-number >10</span>];
    <span class=hljs-keyword >int</span> class_year;
    <span class=hljs-keyword >char</span> gender;
    <span class=hljs-keyword >test_scores_t</span> test_scores; <span class=hljs-comment >/* a struct can be nested within a struct */</span>
};</code></pre> <p>Note, again, that the struct created is only a &quot;template&quot;. Here we actually create an <strong>instance</strong> of the struct <code>person_t</code> called <code>Ahmad</code>. Now the struct instance <code>Ahmed</code> has the members: name , class_year, gender and the test scores struct which then has the midterm and final grades.</p> <pre><code class="cpp hljs"><span class=hljs-keyword >person_t</span> Ahmed;</code></pre>
<h2 id=accessing_struct_members ><a href="#accessing_struct_members" class=header-anchor >Accessing Struct Members</a></h2>
<p>Once a struct instance is created, we can access its members by the dot operator. <pre><code class="cpp hljs"><span class=hljs-meta >#<span class=hljs-meta-keyword >include</span> <span class=hljs-meta-string >&lt;iostream&gt;</span></span>
<span class=hljs-meta >#<span class=hljs-meta-keyword >include</span><span class=hljs-meta-string >&lt;cstring&gt;</span></span>

<span class=hljs-class ><span class=hljs-keyword >struct</span> <span class=hljs-title >person_t</span>{</span> <span class=hljs-comment >/* person_t is a struct type */</span>
    <span class=hljs-keyword >int</span> age;
    <span class=hljs-keyword >char</span> gender;
    <span class=hljs-keyword >char</span> name[<span class=hljs-number >10</span>];
};

<span class=hljs-function ><span class=hljs-keyword >int</span> <span class=hljs-title >main</span><span class=hljs-params >(<span class=hljs-keyword >void</span>)</span></span>{
    <span class=hljs-keyword >person_t</span> Ahmed; <span class=hljs-comment >/* A new struct object of type person_t is created */</span>
    Ahmed.age    = <span class=hljs-number >18</span>; <span class=hljs-comment >/* Struct members are accessed by . (dot) character */</span>
    Ahmed.gender = <span class=hljs-string >&#x27;M&#x27;</span>;
    <span class=hljs-built_in >strcpy</span>(Ahmed.name, <span class=hljs-string >&quot;Ahmed&quot;</span>);

    std::cout &lt;&lt; <span class=hljs-string >&quot;Name: &quot;</span> &lt;&lt; Ahmed.name &lt;&lt; <span class=hljs-string >&quot;, Age:&quot;</span> &lt;&lt; Ahmed.age 
    &lt;&lt; <span class=hljs-string >&quot;, Gender = &quot;</span> &lt;&lt; Ahmed.gender &lt;&lt; std::endl;

    <span class=hljs-keyword >return</span> <span class=hljs-number >0</span>;
}</code></pre> Output: <pre><code class="plaintext hljs">Name: Ahmed, Age:18, Gender = M
</code></pre></p>
<p>Here we use the function string copy to copy over the literal string to the name array. More on strings later.</p>
<pre><code class="cpp hljs"><span class=hljs-built_in >strcpy</span>(Ahmed.name, <span class=hljs-string >&quot;Ahmed&quot;</span>);</code></pre>
<h2 id=manipulating_structs ><a href="#manipulating_structs" class=header-anchor >Manipulating Structs</a></h2>
<p><pre><code class="cpp hljs"><span class=hljs-meta >#<span class=hljs-meta-keyword >include</span> <span class=hljs-meta-string >&lt;iostream&gt;</span></span>
<span class=hljs-class ><span class=hljs-keyword >struct</span> <span class=hljs-title >person_t</span>{</span>
    <span class=hljs-keyword >int</span> age; <span class=hljs-keyword >char</span> gender; <span class=hljs-keyword >char</span> name[<span class=hljs-number >10</span>];
}Sara, Abdullah; <span class=hljs-comment >/* Struct objects can be created, they are global */</span>

<span class=hljs-function ><span class=hljs-keyword >void</span> <span class=hljs-title >add_age</span><span class=hljs-params >(<span class=hljs-keyword >person_t</span> &amp;person, <span class=hljs-keyword >int</span> age)</span></span>{
    person.age = age;
}
<span class=hljs-function ><span class=hljs-keyword >void</span> <span class=hljs-title >sub_routine</span><span class=hljs-params >(<span class=hljs-keyword >void</span>)</span></span>;

<span class=hljs-function ><span class=hljs-keyword >int</span> <span class=hljs-title >main</span><span class=hljs-params >(<span class=hljs-keyword >void</span>)</span></span>{
    <span class=hljs-keyword >person_t</span> Ahmed; <span class=hljs-comment >/* A a struct created here has a local scope */</span>
    <span class=hljs-built_in >add_age</span>(Ahmed, <span class=hljs-number >24</span>);
    <span class=hljs-built_in >sub_routine</span>();
    <span class=hljs-keyword >return</span> <span class=hljs-number >0</span>;
}
<span class=hljs-function ><span class=hljs-keyword >void</span> <span class=hljs-title >sub_routine</span><span class=hljs-params >(<span class=hljs-keyword >void</span>)</span></span>{
    <span class=hljs-built_in >add_age</span>(Sara, <span class=hljs-number >19</span>); <span class=hljs-comment >/* Global structs can be accessed here */</span>
    <span class=hljs-built_in >add_age</span>(Abdullah, <span class=hljs-number >21</span>);
}</code></pre> Output: </p>
<pre><code class="cpp hljs">test
test2</code></pre>
<p>We can create multiple instances of the struct after the struct declaration, separated by comma, ending with a semicolon. Note that these struct instances are global. </p>
<pre><code class="cpp hljs"><span class=hljs-class ><span class=hljs-keyword >struct</span> <span class=hljs-title >person_t</span>{</span>
    <span class=hljs-keyword >int</span> age; <span class=hljs-keyword >char</span> gender; <span class=hljs-keyword >char</span> name[<span class=hljs-number >10</span>];
}Sara, Abdullah; <span class=hljs-comment >/* Struct objects can be created, they are global */</span></code></pre>
<p>We can pass a struct to a function. Here we pass the struct by reference, so the original struct is access directly, not a copy of it. </p>
<pre><code class="cpp hljs"><span class=hljs-function ><span class=hljs-keyword >void</span> <span class=hljs-title >add_age</span><span class=hljs-params >(<span class=hljs-keyword >person_t</span> &amp;person, <span class=hljs-keyword >int</span> age)</span></span>{
    person.age = age;
}</code></pre>
<pre><code class="cpp hljs"><span class=hljs-built_in >add_age</span>(Ahmed, <span class=hljs-number >24</span>);</code></pre>
<p>And since Sara, and Abdullah are global struct instances, they can be accessed anywhere in the file. </p>
<pre><code class="cpp hljs"><span class=hljs-function ><span class=hljs-keyword >void</span> <span class=hljs-title >sub_routine</span><span class=hljs-params >(<span class=hljs-keyword >void</span>)</span></span>{
    <span class=hljs-built_in >add_age</span>(Sara, <span class=hljs-number >19</span>); <span class=hljs-comment >/* Global structs can be accessed here */</span>
    <span class=hljs-built_in >add_age</span>(Abdullah, <span class=hljs-number >21</span>);
}</code></pre>
<h2 id=struct_as_function_return ><a href="#struct_as_function_return" class=header-anchor >Struct as function return</a></h2>
<p>A function can actually return a struct. Note that it will return a <strong>copy</strong> of a struct here, perhaps this may not be the most efficient way, especially if the struct is large or this function is called many times. </p>
<pre><code class="cpp hljs"><span class=hljs-meta >#<span class=hljs-meta-keyword >include</span> <span class=hljs-meta-string >&lt;iostream&gt;</span></span>
<span class=hljs-class ><span class=hljs-keyword >struct</span> <span class=hljs-title >person_t</span>{</span>
    <span class=hljs-keyword >int</span> age; <span class=hljs-keyword >char</span> gender; <span class=hljs-keyword >char</span> name[<span class=hljs-number >10</span>];
}Sara;

<span class=hljs-function ><span class=hljs-keyword >void</span> <span class=hljs-title >add_age_1</span><span class=hljs-params >(<span class=hljs-keyword >person_t</span> &amp;person, <span class=hljs-keyword >int</span> age)</span></span>{ <span class=hljs-comment >/* Takes struct by reference */</span>
    person.age = age;
}
<span class=hljs-function ><span class=hljs-keyword >person_t</span> <span class=hljs-title >add_age_2</span><span class=hljs-params >(<span class=hljs-keyword >person_t</span> person, <span class=hljs-keyword >int</span> age)</span></span>{ <span class=hljs-comment >/* Takes a copy of struct, returns a struct */</span>
    person.age = age;
    <span class=hljs-keyword >return</span> person;
}

<span class=hljs-function ><span class=hljs-keyword >int</span> <span class=hljs-title >main</span><span class=hljs-params >(<span class=hljs-keyword >void</span>)</span></span>{
    <span class=hljs-keyword >person_t</span> Ahmed; <span class=hljs-comment >/* A a struct created here has a local scope */</span>
    <span class=hljs-built_in >add_age_1</span>(Sara, <span class=hljs-number >19</span>); <span class=hljs-comment >/* Original object is manipulated */</span>
    Ahmed = <span class=hljs-built_in >add_age_2</span>(Ahmed, <span class=hljs-number >24</span>); <span class=hljs-comment >/* A copy of the original object is passed */</span>
    <span class=hljs-keyword >return</span> <span class=hljs-number >0</span>;
}</code></pre>
<p>Since the <code>add_age_2</code> function returns a struct, we can copy over the returned struct to Ahmad struct. Again, this might not be the most efficient way to do it.</p>
<p>Next: <a href="../lesson12/">Classes</a></p>
<div class=page-foot >
  <div class=copyright >
    &copy; Ali AlSaibie, PhD. Last modified: April 03, 2021. Website built with <a href="https://github.com/tlienart/Franklin.jl">Franklin.jl</a> and the <a href="https://julialang.org">Julia programming language</a>.
  </div>
</div>
</div>
    </div>  
    
    
        
<script src="/embedded_ccpp/libs/highlight/highlightjs-line-numbers.js"></script>