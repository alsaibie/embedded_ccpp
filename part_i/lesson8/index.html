<!doctype html> <html lang=en > <meta charset=UTF-8 > <meta name=viewport  content="width=device-width, initial-scale=1"> <link rel=stylesheet  href="/embedded_ccpp/libs/highlight/github.min.css"> <link rel=stylesheet  href="/embedded_ccpp/css/franklin.css"> <link rel=stylesheet  href="/embedded_ccpp/css/poole_hyde.css"> <link rel=stylesheet  href="/embedded_ccpp/css/custom.css"> <style> html {font-size: 17px;} .franklin-content {position: relative; padding-left: 8%; padding-right: 5%; line-height: 1.35em;} @media (min-width: 940px) { .franklin-content {width: 100%; margin-left: auto; margin-right: auto;} } @media (max-width: 968px) { .franklin-content {padding-left: 6%; padding-right: 6%;} } </style> <link rel=icon  href="/embedded_ccpp/assets/c.svg"> <title>I Fundamentals - Control Structures</title> <div class=sidebar > <div class="container sidebar-sticky"> <div class=sidebar-about > <br> <img src="/embedded_ccpp/assets/KuwaitUniversityLogoTextLight.svg" style="width: 200px; height: auto; display: inline"> <h1 style="font-size:2em; opacity: 0.75;"><a href="/embedded_ccpp/">C/C++</a></h1> <p class=lead >Introduction to Embedded C/C++</p> </div> <script> function hidePart(part_div) { var x = document.getElementById(part_div); if (x.style.display === "none") { x.style.display = "block"; } else { x.style.display = "none"; } } </script> <nav class=sidebar-nav > <a class="sidebar-nav-item " href="/embedded_ccpp/">Home</a> <a class="sidebar-nav-item " href="https://alsaibie.github.io/me319">ME319 Mechatronics Course</a> <br> <small style="text-transform: uppercase; font-size: 0.75em">Lessons</small> <div class=part  onclick="hidePart('part1_div')">Fundamentals</div> <div id=part1_div  style="display:none;"> <a class="sidebar-nav-item " href="/embedded_ccpp/part_i/introduction/"><b>L0</b> <em>Introduction</em></a> <a class="sidebar-nav-item " href="/embedded_ccpp/part_i/lesson1/"><b>L1</b> <em>C and C++</em></a> <a class="sidebar-nav-item " href="/embedded_ccpp/part_i/lesson2/"><b>L2</b> <em>File and Program Structure</em></a> <a class="sidebar-nav-item " href="/embedded_ccpp/part_i/lesson3/"><b>L3</b> <em>Data Types</em></a> <a class="sidebar-nav-item " href="/embedded_ccpp/part_i/lesson4/"><b>L4</b> <em>Variables</em></a> <a class="sidebar-nav-item " href="/embedded_ccpp/part_i/lesson5/"><b>L5</b> <em>Arrays</em></a> <a class="sidebar-nav-item " href="/embedded_ccpp/part_i/lesson6/"><b>L6</b> <em>Type Qualifiers and Storage Specifiers</em></a> <a class="sidebar-nav-item " href="/embedded_ccpp/part_i/lesson7/"><b>L7</b> <em>Operations</em></a> <a class="sidebar-nav-item active" href="/embedded_ccpp/part_i/lesson8/"><b>L8</b> <em>Control Structures</em></a> <a class="sidebar-nav-item " href="/embedded_ccpp/part_i/lesson9/"><b>L9</b> <em>Functions</em></a> <a class="sidebar-nav-item " href="/embedded_ccpp/part_i/lesson10/"><b>L10</b> <em>Pointers and References</em></a> <a class="sidebar-nav-item " href="/embedded_ccpp/part_i/lesson11/"><b>L11</b> <em>Structs</em></a> <a class="sidebar-nav-item " href="/embedded_ccpp/part_i/lesson12/"><b>L12</b> <em>Classes</em></a> <a class="sidebar-nav-item " href="/embedded_ccpp/part_i/lesson13/"><b>L13</b> <em>Strings</em></a> <a class="sidebar-nav-item " href="/embedded_ccpp/part_i/lesson14/"><b>L14</b> <em>Preprocessor Directives</em></a> <a class="sidebar-nav-item " href="/embedded_ccpp/part_i/lesson15/"><b>L15</b> <em>Standard Library</em></a> <a class="sidebar-nav-item " href="/embedded_ccpp/part_i/lesson16/"><b>L16</b> <em>C/C++ Process Flow</em></a> <a class="sidebar-nav-item " href="/embedded_ccpp/part_i/lesson17/"><b>L17</b> <em>Debugging</em></a> </div> <div class=part  onclick="hidePart('part2_div')">Embedded Applications</div> <div id=part2_div  style="display:none;"> <a class="sidebar-nav-item " href="/embedded_ccpp/part_ii/lesson1/"><b>L1</b> <em>Event-Drive Programming</em></a> <a class="sidebar-nav-item " href="/embedded_ccpp/part_ii/lesson2/"><b>L2</b> <em>Threads</em></a> <a class="sidebar-nav-item " href="/embedded_ccpp/part_ii/lesson3/"><b>L3</b> <em>Interrupts</em></a> <a class="sidebar-nav-item " href="/embedded_ccpp/part_ii/lesson3/"><b>L4</b> <em>Scheduling</em></a> <a class="sidebar-nav-item " href="/embedded_ccpp/part_ii/lesson3/"><b>L5</b> <em>Real-Time Control</em></a> <a class="sidebar-nav-item " href="/embedded_ccpp/part_ii/lesson3/"><b>L6</b> <em>Filters and Digital Controllers</em></a> <a class="sidebar-nav-item " href="/embedded_ccpp/part_ii/lesson3/"><b>L7</b> <em>Object-Oriented Device Libraries</em></a> <a class="sidebar-nav-item " href="/embedded_ccpp/part_ii/lesson3/"><b>L8</b> <em>State-Machine</em></a> </div> <div class=part  onclick="hidePart('part3_div')">Code Optimization</div> <div id=part3_div  style="display:none;"> <a class="sidebar-nav-item " href="/embedded_ccpp/part_iii/lesson1/"><b>L1</b> <em>Variable Sizes</em></a> <a class="sidebar-nav-item " href="/embedded_ccpp/part_iii/lesson2/"><b>L2</b> <em>Probabilistic Priority</em></a> <a class="sidebar-nav-item " href="/embedded_ccpp/part_iii/lesson3/"><b>L3</b> <em>Jumps and Branches</em></a> <a class="sidebar-nav-item " href="/embedded_ccpp/part_iii/lesson4/"><b>L4</b> <em>Loop Jamming</em></a> <a class="sidebar-nav-item " href="/embedded_ccpp/part_iii/lesson4/"><b>L5</b> <em>Integer vs. Floating Point Math</em></a> <a class="sidebar-nav-item " href="/embedded_ccpp/part_iii/lesson4/"><b>L6</b> <em>Pass by Reference</em></a> <a class="sidebar-nav-item " href="/embedded_ccpp/part_iii/lesson4/"><b>L7</b> <em>Reduce Expensive Math</em></a> </div> <!-- <div class=part  onclick="hidePart('part4_div')">Arduino API</div> <div id=part4_div  style="display:none;"> <a class="sidebar-nav-item {{ispage /part_iv/lesson1/}}active{{end}}" href="/embedded_ccpp/part_iv/lesson1/"><b>L1</b> <em>Overview</em></a> <a class="sidebar-nav-item {{ispage /part_iv/lesson2/}}active{{end}}" href="/embedded_ccpp/part_iv/lesson2/"><b>L2</b> <em>Program Structure</em></a> <a class="sidebar-nav-item {{ispage /part_iv/lesson3/}}active{{end}}" href="/embedded_ccpp/part_iv/lesson3/"><b>L3</b> <em>Blinky Example</em></a> <a class="sidebar-nav-item {{ispage /part_iv/lesson4/}}active{{end}}" href="/embedded_ccpp/part_iv/lesson4/"><b>L4</b> <em>Input Output Example</em></a> <a class="sidebar-nav-item {{ispage /part_iv/lesson5/}}active{{end}}" href="/embedded_ccpp/part_iv/lesson5/"><b>L5</b> <em>Arduino Library</em></a> <a class="sidebar-nav-item {{ispage /part_iv/lesson6/}}active{{end}}" href="/embedded_ccpp/part_iv/lesson6/"><b>L6</b> <em>Custom Library</em></a> </div> --> <!-- <small style="text-transform: uppercase; font-size: 0.75em">Tutorials</small> <div class=part  onclick="hidePart('vscode_setup_div')">VSCode Setup</div> <div id=vscode_setup_div  style="display:none;"> <a class="sidebar-nav-item {{ispage /vscode_setup/host/}}active{{end}}" href="/embedded_ccpp/vscode_setup/host/"> <em>Compile for Host</em></a> <a class="sidebar-nav-item {{ispage /vscode_setup/platformio/}}active{{end}}" href="/embedded_ccpp/vscode_setup/platformio/"> <em>Platform-IO</em></a> </div> --> </nav> <p>&copy; Ali AlSaibie, PhD.</p> </div> </div> <div class="content container"> <div class=franklin-content ><h1 id=control_structures ><a href="#control_structures" class=header-anchor >Control Structures</a></h1> <p> <center><iframe title=vimeo-player  src="https://player.vimeo.com/video/386947527" width=640  height=370  frameborder=0  allowfullscreen></iframe></center> <br> A flow control structure is a block of a program that determines the direction of the code flow given certain conditions. </p> <p>In C/C&#43;&#43; we have the selection structures if/else and the switch statement. And we have the loop structures for, while and do while loops.</p> <p>Letâ€™s look at an example for each.</p> <h2 id=if_statement ><a href="#if_statement" class=header-anchor >If Statement</a></h2> <p>An if statement can contain at least an if logical condition and if true, a block of code within the curly braces would be performed. An if statement can optionally have multiple else if statements, but only one else statement. </p> <p><pre><code class="cpp hljs"><span class=hljs-meta >#<span class=hljs-meta-keyword >include</span> <span class=hljs-meta-string >&lt;cstdint&gt;</span></span>
<span class=hljs-meta >#<span class=hljs-meta-keyword >include</span> <span class=hljs-meta-string >&lt;iostream&gt;</span></span>

<span class=hljs-keyword >using</span> <span class=hljs-keyword >namespace</span> std;
<span class=hljs-function ><span class=hljs-keyword >int</span> <span class=hljs-title >main</span><span class=hljs-params >(<span class=hljs-keyword >int</span> argc, <span class=hljs-keyword >char</span> *argv[])</span>
</span>{
    <span class=hljs-keyword >int</span> k = <span class=hljs-number >3</span>;
    <span class=hljs-keyword >if</span> (k == <span class=hljs-number >1</span>)
    {      cout &lt;&lt; k &lt;&lt; endl;  }
    <span class=hljs-keyword >else</span> <span class=hljs-keyword >if</span> (k == <span class=hljs-number >2</span>)
    {     cout &lt;&lt; k &lt;&lt; endl;   }
    <span class=hljs-keyword >else</span> <span class=hljs-comment >/* This condition is valid */</span>
    {    cout &lt;&lt; k &lt;&lt; endl; <span class=hljs-comment >/* Output: 3*/</span> }
    <span class=hljs-keyword >return</span> <span class=hljs-number >0</span>;
}</code></pre> <pre><code class="plaintext hljs">3
</code></pre></p> <p>Going down the list of if conditions, once the condition is true, the code will be executed and no further logical checks will be performed. </p> <h2 id=switch_statement ><a href="#switch_statement" class=header-anchor >Switch Statement</a></h2> <p>A switch statement is the other selection structure in C/C&#43;&#43;. </p> <p><pre><code class="cpp hljs"><span class=hljs-meta >#<span class=hljs-meta-keyword >include</span> <span class=hljs-meta-string >&lt;cstdint&gt;</span></span>
<span class=hljs-meta >#<span class=hljs-meta-keyword >include</span> <span class=hljs-meta-string >&lt;iostream&gt;</span></span>
<span class=hljs-keyword >using</span> <span class=hljs-keyword >namespace</span> std;
<span class=hljs-function ><span class=hljs-keyword >int</span> <span class=hljs-title >main</span><span class=hljs-params >(<span class=hljs-keyword >int</span> argc, <span class=hljs-keyword >char</span> *argv[])</span>
</span>{
    <span class=hljs-keyword >int</span> k = <span class=hljs-number >3</span>;
    <span class=hljs-built_in ><span class=hljs-keyword >switch</span></span> (k)
    {
    <span class=hljs-keyword >case</span> <span class=hljs-number >2</span>:
        cout &lt;&lt; <span class=hljs-string >&quot;case 2&quot;</span> &lt;&lt; endl;
    <span class=hljs-keyword >case</span> <span class=hljs-number >3</span>:
        cout &lt;&lt; <span class=hljs-string >&quot;case 3&quot;</span> &lt;&lt; endl;
    <span class=hljs-keyword >case</span> <span class=hljs-number >4</span>:
        cout &lt;&lt; <span class=hljs-string >&quot;case 4&quot;</span> &lt;&lt; endl;
    }
    <span class=hljs-comment >/* Output : case 3, case 4
     * if no break statement is provided, all proceeding instructions will be executed 
     */</span>  
    <span class=hljs-keyword >return</span> <span class=hljs-number >0</span>;
}</code></pre> <pre><code class="plaintext hljs">case 3
case 4
</code></pre></p> <p>The way the switch statement works, is by starting off with the switch keyword and then passing a variable or expression here. </p> <p>Then, inside a curly braces block, we use the case keyword to identify the possible values to check for. </p> <p>If a case is met, for example here k&#61;3 and so the second case is met. </p> <p>The code after the colons will be executed and NOTE, all the following codes the proceed even in the remaining cases, will also be executed until a break keyword is reached or the switch statement is completed.</p> <h3 id=breaking_the_switch_statement ><a href="#breaking_the_switch_statement" class=header-anchor >Breaking the switch statement</a></h3> <p>Here, we repeat example but notice how we add the break keyword at the end of every case code. So, when case 3 is met, the program will print out case 3 and then break away from the switch statement.</p> <p><pre><code class="cpp hljs"><span class=hljs-meta >#<span class=hljs-meta-keyword >include</span> <span class=hljs-meta-string >&lt;cstdint&gt;</span></span>
<span class=hljs-meta >#<span class=hljs-meta-keyword >include</span> <span class=hljs-meta-string >&lt;iostream&gt;</span></span>

<span class=hljs-keyword >using</span> <span class=hljs-keyword >namespace</span> std;
<span class=hljs-function ><span class=hljs-keyword >int</span> <span class=hljs-title >main</span><span class=hljs-params >(<span class=hljs-keyword >int</span> argc, <span class=hljs-keyword >char</span> *argv[])</span>
</span>{
    <span class=hljs-keyword >int</span> k = <span class=hljs-number >3</span>;
    <span class=hljs-built_in ><span class=hljs-keyword >switch</span></span> (k)
    {
    <span class=hljs-keyword >case</span> <span class=hljs-number >2</span>:
        cout &lt;&lt; <span class=hljs-string >&quot;case 2&quot;</span> &lt;&lt; endl; <span class=hljs-keyword >break</span>;
    <span class=hljs-keyword >case</span> <span class=hljs-number >3</span>:
        cout &lt;&lt; <span class=hljs-string >&quot;case 3&quot;</span> &lt;&lt; endl; <span class=hljs-keyword >break</span>;
    <span class=hljs-keyword >case</span> <span class=hljs-number >4</span>:
        cout &lt;&lt; <span class=hljs-string >&quot;case 4&quot;</span> &lt;&lt; endl; <span class=hljs-keyword >break</span>;
    }
    <span class=hljs-comment >/* Output : case 3 */</span>
    <span class=hljs-keyword >return</span> <span class=hljs-number >0</span>;
}</code></pre> <pre><code class="plaintext hljs">case 3
</code></pre></p> <p>This subtlety is often missed by beginners. Always include a break statement.</p> <h2 id=for_loop ><a href="#for_loop" class=header-anchor >For Loop</a></h2> <p>Probably the most famous loop structure in the world is the for loop. A for loop is intended for repeating a block of code given a start and end condition. </p> <p><pre><code class="cpp hljs"><span class=hljs-meta >#<span class=hljs-meta-keyword >include</span> <span class=hljs-meta-string >&lt;cstdint&gt;</span></span>
<span class=hljs-meta >#<span class=hljs-meta-keyword >include</span> <span class=hljs-meta-string >&lt;iostream&gt;</span></span>

<span class=hljs-keyword >using</span> <span class=hljs-keyword >namespace</span> std; 
<span class=hljs-function ><span class=hljs-keyword >int</span> <span class=hljs-title >main</span><span class=hljs-params >(<span class=hljs-keyword >int</span> argc, <span class=hljs-keyword >char</span>* argv[])</span> </span>{ 

    <span class=hljs-comment >/* (Setup/Initializer; Condition; Operation) */</span>
    <span class=hljs-keyword >for</span> (<span class=hljs-keyword >int</span> k = <span class=hljs-number >0</span>; k &lt;= <span class=hljs-number >5</span>; k++){
        cout &lt;&lt; k &lt;&lt; endl; <span class=hljs-comment >/* Output: 0, 1, 2, 3, 4, 5 */</span>
    }
    <span class=hljs-keyword >return</span> <span class=hljs-number >0</span>; 
}</code></pre> <pre><code class="plaintext hljs">0
1
2
3
4
5
</code></pre></p> <p>A for loop in C/C&#43;&#43; is written in the following form, the for keyword is used and then three elements are defined, the first is an initializer, this is executed once, then the condition, this is check for trueness and the loop will repeat if it is true, the last is an operation that is performed at every loop. This is often used to increment the loop index as shown. Note that you can choose to increment the loop index within the for loop.</p> <p>Also note that the scope of the loop index variable k is just within the for loop structure, it has no definition outside of the for loop here. </p> <p>Here we initialize a variable k to zero, then execute the code in the loop if the condition is true which check if k is less than or equal to 5, then increments k. The code will be executed 6 times since we started from 0 and ended at 5. </p> <h2 id=while_loop ><a href="#while_loop" class=header-anchor >While Loop</a></h2> <p>A while loop keeps executing a code block as long as the condition within the while logical statement is true. </p> <p><pre><code class="cpp hljs"><span class=hljs-meta >#<span class=hljs-meta-keyword >include</span> <span class=hljs-meta-string >&lt;cstdint&gt;</span></span>
<span class=hljs-meta >#<span class=hljs-meta-keyword >include</span> <span class=hljs-meta-string >&lt;iostream&gt;</span></span>

<span class=hljs-keyword >using</span> <span class=hljs-keyword >namespace</span> std; 
<span class=hljs-function ><span class=hljs-keyword >int</span> <span class=hljs-title >main</span><span class=hljs-params >(<span class=hljs-keyword >int</span> argc, <span class=hljs-keyword >char</span>* argv[])</span> </span>{ 

    <span class=hljs-keyword >int</span> k = <span class=hljs-number >0</span>;
    <span class=hljs-comment >/* (Condition) */</span>
    <span class=hljs-keyword >while</span>(++k &lt; <span class=hljs-number >5</span>) {
        cout &lt;&lt; k &lt;&lt; endl; <span class=hljs-comment >/* Output: 1, 2, 3, 4 */</span>
    }
    <span class=hljs-keyword >return</span> <span class=hljs-number >0</span>; 
}</code></pre> <pre><code class="plaintext hljs">1
2
3
4
</code></pre></p> <p>A while loop and if loop can often be used interchangeably for the same purpose. </p> <p>Here if initialized a variable k outside the loop. This time the variable k has a local scope outside the flow structure. </p> <p>Then we pre-increment the variable k and check if it is less than 5. If so, execute the code. </p> <p>Note that the code was executed only 4 times. Thatâ€™s because we pre-incremented k, so we started at 1 and we only specified the while condition to be true if k is LESS than 5.</p> <h3 id=infinite_while_loops ><a href="#infinite_while_loops" class=header-anchor >Infinite While Loops</a></h3> <p>You will often see an infinite loop in embedded systems. </p> <p><pre><code class="cpp hljs"><span class=hljs-meta >#<span class=hljs-meta-keyword >include</span> <span class=hljs-meta-string >&lt;cstdint&gt;</span></span>
<span class=hljs-meta >#<span class=hljs-meta-keyword >include</span> <span class=hljs-meta-string >&lt;iostream&gt;</span></span>

<span class=hljs-keyword >using</span> <span class=hljs-keyword >namespace</span> std; 
<span class=hljs-function ><span class=hljs-keyword >int</span> <span class=hljs-title >main</span><span class=hljs-params >(<span class=hljs-keyword >int</span> argc, <span class=hljs-keyword >char</span>* argv[])</span> </span>{ 

    <span class=hljs-keyword >int</span> k = <span class=hljs-number >0</span>;
    <span class=hljs-comment >/* (Condition) */</span>
    <span class=hljs-keyword >while</span>(<span class=hljs-literal >true</span>) {
        cout &lt;&lt; k &lt;&lt; endl; <span class=hljs-comment >/* Output: 0, 1, 2, 3, 4, 5 */</span>
        k++;
        <span class=hljs-keyword >if</span> (k == <span class=hljs-number >6</span>) <span class=hljs-keyword >break</span>; <span class=hljs-comment >/* This will break the program from the loop */</span>
    }
    <span class=hljs-keyword >return</span> <span class=hljs-number >0</span>; 
}</code></pre> <pre><code class="plaintext hljs">0
1
2
3
4
5
</code></pre></p> <p>An infinite loop is a loop that is always, true. It is infinite in the sense that it will repeat itself forever. </p> <p>However, you can still break away from an infinite loop if you use the break keyword.</p> <p>A classic example is if you have a robot waiting for a GPS signal before it starts moving, perhaps an infinite while loop is need to keep checking if the signal is received, once received we can use the break keyword to break from the loop and proceed with the remaining program steps.</p> <h2 id=do_while ><a href="#do_while" class=header-anchor >Do While</a></h2> <p>A do-while loop is similar to a while loop but for one difference. A do-while loop executes the loop the first time regardless if the condition in the while is true or not, then on the second loop onward the while logic statement is checked. </p> <p><pre><code class="cpp hljs"><span class=hljs-meta >#<span class=hljs-meta-keyword >include</span> <span class=hljs-meta-string >&lt;cstdint&gt;</span></span>
<span class=hljs-meta >#<span class=hljs-meta-keyword >include</span> <span class=hljs-meta-string >&lt;iostream&gt;</span></span>

<span class=hljs-keyword >using</span> <span class=hljs-keyword >namespace</span> std; 
<span class=hljs-function ><span class=hljs-keyword >int</span> <span class=hljs-title >main</span><span class=hljs-params >(<span class=hljs-keyword >int</span> argc, <span class=hljs-keyword >char</span>* argv[])</span> </span>{ 

    <span class=hljs-keyword >int</span> k = <span class=hljs-number >0</span>;
    <span class=hljs-comment >/* (Condition) */</span>
    <span class=hljs-keyword >do</span> {
        cout &lt;&lt; k &lt;&lt; endl; <span class=hljs-comment >/* Output: 0 */</span>
        k++;
    } <span class=hljs-keyword >while</span>(k = <span class=hljs-number >0</span>);
    
    <span class=hljs-keyword >return</span> <span class=hljs-number >0</span>; 
}</code></pre> <pre><code class="plaintext hljs">0
</code></pre></p> <p>Here this code is only executed once, since k is zero at the beginning, then it is incremented. When the while loop checks if k is &#61; 0, the statement is false, and so the loop is not executed the second time. </p> <p>Next: <a href="../lesson9/">Functions</a></p> <div class=page-foot > <div class=copyright > &copy; Ali AlSaibie, PhD. Last modified: April 02, 2021. Website built with <a href="https://github.com/tlienart/Franklin.jl">Franklin.jl</a> and the <a href="https://julialang.org">Julia programming language</a>. </div> </div> </div> </div> <script src="/embedded_ccpp/libs/highlight/highlightjs-line-numbers.js"></script>