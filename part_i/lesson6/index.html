<!doctype html> <html lang=en > <meta charset=UTF-8 > <meta name=viewport  content="width=device-width, initial-scale=1"> <link rel=stylesheet  href="/embedded_ccpp/libs/highlight/github.min.css"> <link rel=stylesheet  href="/embedded_ccpp/css/franklin.css"> <link rel=stylesheet  href="/embedded_ccpp/css/poole_hyde.css"> <link rel=stylesheet  href="/embedded_ccpp/css/custom.css"> <style> html {font-size: 17px;} .franklin-content {position: relative; padding-left: 8%; padding-right: 5%; line-height: 1.35em;} @media (min-width: 940px) { .franklin-content {width: 100%; margin-left: auto; margin-right: auto;} } @media (max-width: 968px) { .franklin-content {padding-left: 6%; padding-right: 6%;} } </style> <link rel=icon  href="/embedded_ccpp/assets/c.svg"> <title>I Fundamentals - Type Qualifiers and Storage Specifiers</title> <div class=sidebar > <div class="container sidebar-sticky"> <div class=sidebar-about > <br> <img src="/embedded_ccpp/assets/KuwaitUniversityLogoTextLight.svg" style="width: 200px; height: auto; display: inline"> <h1 style="font-size:2em; opacity: 0.75;"><a href="/embedded_ccpp/">C/C++</a></h1> <p class=lead >Embedded C/C++</p> </div> <script> function hidePart(part_div) { var x = document.getElementById(part_div); if (x.style.display === "none") { x.style.display = "block"; } else { x.style.display = "none"; } } </script> <nav class=sidebar-nav > <a class="sidebar-nav-item " href="/embedded_ccpp/">Home</a> <a class="sidebar-nav-item " href="https://alsaibie.github.io/me319">ME319 Mechatronics Course</a> <br> <small style="text-transform: uppercase; font-size: 0.75em">Lessons</small> <div class=part  onclick="hidePart('part1_div')">Fundamentals</div> <div id=part1_div  style="display:none;"> <a class="sidebar-nav-item " href="/embedded_ccpp/part_i/lesson1/"><b>L1</b> <em>Introduction</em></a> <a class="sidebar-nav-item " href="/embedded_ccpp/part_i/lesson2/"><b>L2</b> <em>File and Program Structure</em></a> <a class="sidebar-nav-item " href="/embedded_ccpp/part_i/lesson3/"><b>L3</b> <em>Data Types</em></a> <a class="sidebar-nav-item " href="/embedded_ccpp/part_i/lesson4/"><b>L4</b> <em>Variables</em></a> <a class="sidebar-nav-item " href="/embedded_ccpp/part_i/lesson5/"><b>L5</b> <em>Arrays</em></a> <a class="sidebar-nav-item active" href="/embedded_ccpp/part_i/lesson6/"><b>L6</b> <em>Type Qualifiers and Storage Specifiers</em></a> <a class="sidebar-nav-item " href="/embedded_ccpp/part_i/lesson7/"><b>L7</b> <em>Operations</em></a> <a class="sidebar-nav-item " href="/embedded_ccpp/part_i/lesson8/"><b>L8</b> <em>Control Structures</em></a> <a class="sidebar-nav-item " href="/embedded_ccpp/part_i/lesson9/"><b>L9</b> <em>Functions</em></a> <a class="sidebar-nav-item " href="/embedded_ccpp/part_i/lesson10/"><b>L10</b> <em>Pointers and References</em></a> <a class="sidebar-nav-item " href="/embedded_ccpp/part_i/lesson11/"><b>L11</b> <em>Structs</em></a> <a class="sidebar-nav-item " href="/embedded_ccpp/part_i/lesson12/"><b>L12</b> <em>Classes</em></a> <a class="sidebar-nav-item " href="/embedded_ccpp/part_i/lesson13/"><b>L13</b> <em>Strings</em></a> <a class="sidebar-nav-item " href="/embedded_ccpp/part_i/lesson14/"><b>L14</b> <em>Preprocessor Directives</em></a> <a class="sidebar-nav-item " href="/embedded_ccpp/part_i/lesson15/"><b>L15</b> <em>Standard Library</em></a> <a class="sidebar-nav-item " href="/embedded_ccpp/part_i/lesson16/"><b>L16</b> <em>C/C++ Process Flow</em></a> <a class="sidebar-nav-item " href="/embedded_ccpp/part_i/lesson17/"><b>L17</b> <em>Debugging</em></a> </div> <div class=part  onclick="hidePart('part2_div')">Embedded Applications</div> <div id=part2_div  style="display:none;"> <a class="sidebar-nav-item " href="/embedded_ccpp/part_ii/lesson1/"><b>L1</b> <em>Event-Drive Programming</em></a> <a class="sidebar-nav-item " href="/embedded_ccpp/part_ii/lesson2/"><b>L2</b> <em>Threads</em></a> <a class="sidebar-nav-item " href="/embedded_ccpp/part_ii/lesson3/"><b>L3</b> <em>Interrupts</em></a> <a class="sidebar-nav-item " href="/embedded_ccpp/part_ii/lesson3/"><b>L4</b> <em>Scheduling</em></a> <a class="sidebar-nav-item " href="/embedded_ccpp/part_ii/lesson3/"><b>L5</b> <em>Real-Time Control</em></a> <a class="sidebar-nav-item " href="/embedded_ccpp/part_ii/lesson3/"><b>L6</b> <em>Filters and Digital Controllers</em></a> <a class="sidebar-nav-item " href="/embedded_ccpp/part_ii/lesson3/"><b>L7</b> <em>Object-Oriented Device Libraries</em></a> <a class="sidebar-nav-item " href="/embedded_ccpp/part_ii/lesson3/"><b>L8</b> <em>State-Machine</em></a> </div> <div class=part  onclick="hidePart('part3_div')">Code Optimization</div> <div id=part3_div  style="display:none;"> <a class="sidebar-nav-item " href="/embedded_ccpp/part_iii/lesson1/"><b>L1</b> <em>Variable Sizes</em></a> <a class="sidebar-nav-item " href="/embedded_ccpp/part_iii/lesson2/"><b>L2</b> <em>Probabilistic Priority</em></a> <a class="sidebar-nav-item " href="/embedded_ccpp/part_iii/lesson3/"><b>L3</b> <em>Jumps and Branches</em></a> <a class="sidebar-nav-item " href="/embedded_ccpp/part_iii/lesson4/"><b>L4</b> <em>Loop Jamming</em></a> <a class="sidebar-nav-item " href="/embedded_ccpp/part_iii/lesson4/"><b>L5</b> <em>Integer vs. Floating Point Math</em></a> <a class="sidebar-nav-item " href="/embedded_ccpp/part_iii/lesson4/"><b>L6</b> <em>Pass by Reference</em></a> <a class="sidebar-nav-item " href="/embedded_ccpp/part_iii/lesson4/"><b>L7</b> <em>Reduce Expensive Math</em></a> </div> <div class=part  onclick="hidePart('part4_div')">Arduino API</div> <div id=part4_div  style="display:none;"> <a class="sidebar-nav-item " href="/embedded_ccpp/part_iv/lesson1/"><b>L1</b> <em>Overview</em></a> <a class="sidebar-nav-item " href="/embedded_ccpp/part_iv/lesson2/"><b>L2</b> <em>Program Structure</em></a> <a class="sidebar-nav-item " href="/embedded_ccpp/part_iv/lesson3/"><b>L3</b> <em>Blinky Example</em></a> <a class="sidebar-nav-item " href="/embedded_ccpp/part_iv/lesson4/"><b>L4</b> <em>Input Output Example</em></a> <a class="sidebar-nav-item " href="/embedded_ccpp/part_iv/lesson5/"><b>L5</b> <em>Arduino Library</em></a> <a class="sidebar-nav-item " href="/embedded_ccpp/part_iv/lesson6/"><b>L6</b> <em>Custom Library</em></a> </div> </nav> <p>&copy; Ali AlSaibie, PhD.</p> </div> </div> <div class="content container"> <div class=franklin-content ><h1 id=type_qualifiers_and_storage_specifiers ><a href="#type_qualifiers_and_storage_specifiers" class=header-anchor >Type Qualifiers and Storage Specifiers</a></h1> <h2 id=static ><a href="#static" class=header-anchor >static</a></h2> <p>In addition to specifying the data type when declaring variables, functions or other elements of C/C&#43;&#43;, there are type qualifiers and storage specifiers that can be used on declaration.</p> <p><pre><code class="cpp hljs"><span class=hljs-meta >#<span class=hljs-meta-keyword >include</span> <span class=hljs-meta-string >&lt;cstdint&gt;</span></span>
<span class=hljs-meta >#<span class=hljs-meta-keyword >include</span> <span class=hljs-meta-string >&lt;iostream&gt;</span></span>
<span class=hljs-keyword >using</span> <span class=hljs-keyword >namespace</span> std;

<span class=hljs-function ><span class=hljs-keyword >int</span> <span class=hljs-title >main</span><span class=hljs-params >(<span class=hljs-keyword >int</span> argc, <span class=hljs-keyword >char</span>* argv[])</span> </span>{ 
    
    <span class=hljs-keyword >for</span> (<span class=hljs-keyword >int</span> k = <span class=hljs-number >0</span>; k &lt;<span class=hljs-number >3</span>; k++){
        <span class=hljs-keyword >uint16_t</span> _a = <span class=hljs-number >3</span>;
        <span class=hljs-keyword >static</span> <span class=hljs-keyword >uint16_t</span> _b = <span class=hljs-number >3</span>; <span class=hljs-comment >/* Declaring a static variable */</span>
        cout &lt;&lt; _a++ &lt;&lt; endl; <span class=hljs-comment >/* Output: 3, 3, 3. Will be reinitialized every loop */</span>
        cout &lt;&lt; _b++ &lt;&lt; endl; <span class=hljs-comment >/* Output: 3, 4, 5. Will be initialized only once when declared */</span>
    }
    <span class=hljs-keyword >return</span> <span class=hljs-number >0</span>;
}</code></pre> <pre><code class="plaintext hljs">3
3
3
4
3
5
</code></pre></p> <p>The static keyword can be used to specify the memory storage characteristics of a variable. A static variable is a variable that is initialized before the code is executed, and it is only declared and initialized once. </p> <p>The variable _a is a regular local variable. Its memory is still reserved at compile time, but it is not initialized until the code is executed. While the variable _b is initialized before the code is executed. </p> <p>This is a for-loop where the code within this scope is repeatedly executed three times. We will discuss for loops separately. But notice the difference here between the static and non static variable. Since this part of the code is repeatedly executed. Every time the this line &#91;uint16_t a..&#93; is called the variable _a is redeclared and reinitialized to 3. While this line &#91;static …&#93; is basically executed only the first time. The value in _b is retained even after the scope of the variable terminates after the loop ends. </p> <p>This feature is very useful in embedded programming. Say you calculated some sensor error value, you want to retain the value until the next time the code loop runs and then you can update the value a static variable can help. </p> <p>Global variables are “static” in the sense that they are declared and initialized once. But beware that there is subtle difference between a non-static global variable, a regular global variable, and a static global variable. </p> <h2 id=extern ><a href="#extern" class=header-anchor >extern</a></h2> <p>The storage specifier extern is used to denote that the variable is declared somewhere else. </p> <p><pre><code class="cpp hljs"><span class=hljs-meta >#<span class=hljs-meta-keyword >include</span> <span class=hljs-meta-string >&lt;cstdint&gt;</span></span>
<span class=hljs-meta >#<span class=hljs-meta-keyword >include</span> <span class=hljs-meta-string >&lt;iostream&gt;</span></span>
<span class=hljs-keyword >using</span> <span class=hljs-keyword >namespace</span> std;

<span class=hljs-keyword >extern</span> <span class=hljs-keyword >uint8_t</span> _g_a = <span class=hljs-number >3</span>; <span class=hljs-comment >/* Variable declared and defined */</span>

<span class=hljs-function ><span class=hljs-keyword >int</span> <span class=hljs-title >multiplyab</span><span class=hljs-params >(<span class=hljs-keyword >void</span>)</span></span>{
    <span class=hljs-keyword >extern</span> <span class=hljs-keyword >uint8_t</span> _g_b; <span class=hljs-comment >/* Variable only declared but not defined here */</span>
    <span class=hljs-keyword >return</span> _g_a * _g_b;
}

<span class=hljs-function ><span class=hljs-keyword >int</span> <span class=hljs-title >main</span><span class=hljs-params >(<span class=hljs-keyword >int</span> argc, <span class=hljs-keyword >char</span>* argv[])</span> </span>{ 
    cout &lt;&lt; <span class=hljs-built_in >multiplyab</span>() &lt;&lt; endl; <span class=hljs-comment >/* Output: 15 */</span>
    <span class=hljs-keyword >return</span> <span class=hljs-number >0</span>;
}

<span class=hljs-keyword >uint8_t</span> _g_b = <span class=hljs-number >5</span>; <span class=hljs-comment >/* At compile time, _g_b is not visible to above functions */</span></code></pre> <pre><code class="plaintext hljs">15
</code></pre></p> <p>This is useful if the variable is declared in a different file. </p> <p>Here, the extern keyword is of no use since by defining the variable <em>g</em>a we have specified its value and location.</p> <p>It comes in handy when you want to use the variable before it is initialized, you just want the compiler to know that “hey” the variable exists. It will use its initialized value even if its initialized later. And this can be seen with the variable <em>g</em>b here &#91; bottom&#93;.</p> <p>Inside the multiplyab function, we just tell the function that there is a global variable named <em>g</em>b of uint8_t type. And note until this point the variable has not been declared. It is declared at the end here.</p> <h2 id=const ><a href="#const" class=header-anchor >const</a></h2> <p>We discussed the two storage specifiers static and extern. There are two type qualifiers const and volatile. A const variable, as the name suggests, is a constant variable. It’s value cannot be changed. This is very useful when you want to ensure that the value is not changed by mistake. And this can happen, say you have an important variable with a specific value assigned to it. You wouldn’t want the same variable name to be referenced and manipulated somewhere else unintentionally. </p> <pre><code class="cpp hljs"><span class=hljs-meta >#<span class=hljs-meta-keyword >include</span> <span class=hljs-meta-string >&lt;cstdint&gt;</span></span>
<span class=hljs-meta >#<span class=hljs-meta-keyword >include</span> <span class=hljs-meta-string >&lt;iostream&gt;</span></span>
<span class=hljs-keyword >using</span> <span class=hljs-keyword >namespace</span> std;

<span class=hljs-function ><span class=hljs-keyword >int</span> <span class=hljs-title >main</span><span class=hljs-params >(<span class=hljs-keyword >int</span> argc, <span class=hljs-keyword >char</span>* argv[])</span> </span>{ 
    <span class=hljs-keyword >const</span> <span class=hljs-keyword >uint8_t</span> a = <span class=hljs-number >1</span>;
    a = <span class=hljs-number >2</span>; <span class=hljs-comment >/* ERROR: Code will not compile, can&#x27;t assign new value to const */</span>
    <span class=hljs-keyword >return</span> <span class=hljs-number >0</span>;
}</code></pre> <pre><code class="julia hljs">error: assignment of read-only variable <span class=hljs-string >&#x27;a&#x27;</span></code></pre>
<p>In this example here, we declare const variable a, and then attempt to change it. This code would not compile actually and would give us an error immediately. </p>
<h2 id=const_static ><a href="#const_static" class=header-anchor >const static</a></h2>
<p>We can combine a type qualifier and storage specifier. We can declare a variable to be both const and static. This means that the variable will be declared and initialized once before the code is executed and it cannot be changed. </p>
<p><pre><code class="cpp hljs"><span class=hljs-meta >#<span class=hljs-meta-keyword >include</span> <span class=hljs-meta-string >&lt;cstdint&gt;</span></span>
<span class=hljs-meta >#<span class=hljs-meta-keyword >include</span> <span class=hljs-meta-string >&lt;iostream&gt;</span></span>
<span class=hljs-keyword >using</span> <span class=hljs-keyword >namespace</span> std;

<span class=hljs-function ><span class=hljs-keyword >int</span> <span class=hljs-title >main</span><span class=hljs-params >(<span class=hljs-keyword >int</span> argc, <span class=hljs-keyword >char</span>* argv[])</span> </span>{ 
    <span class=hljs-keyword >for</span> (<span class=hljs-keyword >int</span> k = <span class=hljs-number >0</span>; k &lt; <span class=hljs-number >2</span>; k++)
    {
        <span class=hljs-keyword >const</span> <span class=hljs-keyword >static</span> <span class=hljs-keyword >uint8_t</span> _a_s = <span class=hljs-number >4</span>; <span class=hljs-comment >/* Will only be initialized once, can&#x27;t be altered */</span>
        cout &lt;&lt; (<span class=hljs-keyword >int</span>)_a_s &lt;&lt; endl;
    }
    <span class=hljs-keyword >return</span> <span class=hljs-number >0</span>;
}</code></pre> <pre><code class="plaintext hljs">4
4
</code></pre></p>
<h2 id=volatile ><a href="#volatile" class=header-anchor >volatile</a></h2>
<p>Sometimes a compiler may optimize a code by assuming that, since a variable is not changed anywhere in the code, its initial value remains the same. </p>
<p><pre><code class="cpp hljs"><span class=hljs-meta >#<span class=hljs-meta-keyword >include</span> <span class=hljs-meta-string >&lt;cstdint&gt;</span></span>
<span class=hljs-meta >#<span class=hljs-meta-keyword >include</span> <span class=hljs-meta-string >&lt;iostream&gt;</span></span>
<span class=hljs-keyword >using</span> <span class=hljs-keyword >namespace</span> std;
<span class=hljs-keyword >volatile</span> <span class=hljs-keyword >uint8_t</span> _g_a = <span class=hljs-number >20</span>;
<span class=hljs-keyword >uint8_t</span> _g_b = <span class=hljs-number >10</span>;
<span class=hljs-function ><span class=hljs-keyword >int</span> <span class=hljs-title >main</span><span class=hljs-params >(<span class=hljs-keyword >int</span> argc, <span class=hljs-keyword >char</span>* argv[])</span> </span>{ 
    <span class=hljs-keyword >for</span> (<span class=hljs-keyword >int</span> k = <span class=hljs-number >0</span>; k &lt; <span class=hljs-number >2</span>; k++)
    {
        <span class=hljs-comment >/* the compiler will not assume the volatile variable doesn&#x27;t change externally */</span>
        <span class=hljs-comment >/* _g_a will be retrieved from its address every time its called */</span>
        cout &lt;&lt; (<span class=hljs-keyword >int</span>)_g_a &lt;&lt; endl; 
        <span class=hljs-comment >/* The compiler may optimize and set output to 10, assuming it won&#x27;t change */</span>        
        cout &lt;&lt; (<span class=hljs-keyword >int</span>)_g_b &lt;&lt; endl; 
    }
    <span class=hljs-keyword >return</span> <span class=hljs-number >0</span>;
}</code></pre> <pre><code class="plaintext hljs">20
10
20
10
</code></pre></p>
<p>Well, what if, and we will see this example clearly in microcontroller programming, what if this variable is manipulated by actions outside of the code itself, through some changes in the hardware. </p>
<p>In this case, and to ensure that this non-varying-variable assumption does not damage our program, we can declare a variable to be volatile. This tells the compiler: hey listen, don’t assume the value doesn’t change, every time this variable is a called, access and read its latest value from its memory location. </p>
<p>Note that the <strong>uint8&#95;t</strong> variables are type-casted to <strong>int</strong> so the output stream treats them as integers not characters.</p>
<p>Next: <a href="../lesson7/">Operations</a></p>
<div class=page-foot >
  <div class=copyright >
    &copy; Ali AlSaibie, PhD. Last modified: April 01, 2021. Website built with <a href="https://github.com/tlienart/Franklin.jl">Franklin.jl</a> and the <a href="https://julialang.org">Julia programming language</a>.
  </div>
</div>
</div>
    </div>